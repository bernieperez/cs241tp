<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_04) on Thu Feb 26 10:16:24 CET 2009 -->
<TITLE>
Transaction
</TITLE>

<META NAME="date" CONTENT="2009-02-26">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../VersantStylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Transaction";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/versant/odmg/Set.html" title="interface in com.versant.odmg"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/versant/odmg/TransactionAbortedException.html" title="class in com.versant.odmg"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/versant/odmg/Transaction.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Transaction.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.versant.odmg</FONT>
<BR>
Class Transaction</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.versant.odmg.Transaction</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>Transaction</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
The predefined type Transaction represents a transaction. A 
 transaction constitutes the basic unit of work in the database 
 under the ODMG object model.
 <p>
 After creating a Transaction instance, you can open it by invoking
 the begin() method. The transaction remains open until you either 
 invoke  commit<code> </code>or<code> </code>abort. This invocation  causes
 the transaction to implicitly close.
 <p>
 Access, creation, and modification of persistent objects must be 
 done in the confines of an open transaction.
 <p>
 Also, note that you must open a database before starting any 
 transactions that use the database, and close a database after 
 ending the transactions.
 <p>
 A Transaction instance bears a one to one mapping with an 
 ODMGSession, a VERSANT/Java Session instance. You can access the 
 <code>ODMGSession</code> from the transaction by invoking the
 session() method. The <code>ODMGSession</code> contains methods 
 that encapsulate additional VERSANT specific functionality that 
 is exclusive of the ODMG 2.0 Java Binding specifications.
 <p>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg"><CODE>Database</CODE></A>, 
<A HREF="../../../com/versant/odmg/ODMGSession.html" title="class in com.versant.odmg"><CODE>ODMGSession</CODE></A></DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#READ">READ</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The lock modes on an object</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#UPGRADE">UPGRADE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#WRITE">WRITE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#Transaction()">Transaction</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#Transaction(com.versant.fund.Capability)">Transaction</A></B>(<A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund">Capability</A>&nbsp;c)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#Transaction(com.versant.odmg.Database)">Transaction</A></B>(<A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg">Database</A>&nbsp;db)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#Transaction(com.versant.odmg.Database, com.versant.fund.Capability)">Transaction</A></B>(<A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg">Database</A>&nbsp;db,
            <A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund">Capability</A>&nbsp;c)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#Transaction(com.versant.odmg.Database, com.versant.fund.Capability, java.util.Properties)">Transaction</A></B>(<A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg">Database</A>&nbsp;db,
            <A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund">Capability</A>&nbsp;cap,
            java.util.Properties&nbsp;prop)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new transaction.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#abort()">abort</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abandons all persistent object modifications and release any 
 associated database locks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#begin()">begin</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Opens a <code>Transaction</code> if it has not already been opened.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#checkpoint()">checkpoint</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commits transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#commit()">commit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commit transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../com/versant/odmg/Transaction.html" title="class in com.versant.odmg">Transaction</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#current()">current</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A <code>static()</code> method on the <code>Transaction</code> 
 class that returns the current transaction associated with the 
 caller thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#isOpen()">isOpen</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns <code>true</code> if a transaction is open and returns 
 <code>false</code> if the transaction is closed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#join()">join</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Associates this thread with this transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#leave()">leave</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disassociates this thread from this transaction.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#lock(java.lang.Object, int)">lock</A></B>(java.lang.Object&nbsp;obj,
     int&nbsp;aMode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Upgrades the lock on the given object to the given level if it is
 not already at or above that level.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/versant/odmg/ODMGSession.html" title="class in com.versant.odmg">ODMGSession</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/versant/odmg/Transaction.html#session()">session</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the <code>ODMGSession</code> instance corresponding to 
 this transaction.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="READ"><!-- --></A><H3>
READ</H3>
<PRE>
public static final int <B>READ</B></PRE>
<DL>
<DD>The lock modes on an object
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#com.versant.odmg.Transaction.READ">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="UPGRADE"><!-- --></A><H3>
UPGRADE</H3>
<PRE>
public static final int <B>UPGRADE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#com.versant.odmg.Transaction.UPGRADE">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="WRITE"><!-- --></A><H3>
WRITE</H3>
<PRE>
public static final int <B>WRITE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#com.versant.odmg.Transaction.WRITE">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Transaction()"><!-- --></A><H3>
Transaction</H3>
<PRE>
public <B>Transaction</B>()</PRE>
<DL>
<DD>Constructs a new transaction.
 <p>
 This method constructs a new transaction, if a transaction is not 
 yet open. You can construct a new transaction only after invoking 
 the <code>begin()</code> method. Instantiating a transaction 
 requires the transaction to be linked to a database. The initial 
 database that the transaction is linked to is referred to as the 
 <i>Session Default Database</i>. We introduce the concepts of a 
 <i>Process Default Database</i> and a <i>Thread Default Database</i>,
 to help determine which database a particular transaction uses as 
 its <i>Session Default Database</i>.
 <p>
 The first database opened in a thread is referred to as the Thread
 Default database for that thread. It remains so until this database
 is closed, after which the Thread Default Database is set to empty.
 Once empty, it is automatically set once another database is opened
 in the context of this thread.
 <p>
 Similarly, the Process Default Database is a 'global' database that
 is set to the first database opened in the program. It is set to 
 empty when this database closes. Once empty, it is automatically
 set once the next database is opened in this program. In the 
 absence of creating a Transaction() instance by specifically using
 the constructor that takes a database as an argument, the Session 
 Default Database is set to any open database used previously in 
 the context of the calling Java thread.(example: the Thread 
 Default Database of the current thread.)  If this is not set, then
 the Process Default Database is used as the Session Default 
 Database.
 <p>
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE><code>TransactionDatabaseNotFoundException()</code></CODE> - a run-time exception, if this transaction is not associated with 
                any database (example: the Thread Default and Process Default 
                databases are not set).
 <p>
<DD><CODE><code>TransactionDatabaseClosedException()</code></CODE> - a 
                run-time exception, if the database associated with this 
                transaction is not opened before calling this constructor.
 <p><DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#begin()"><CODE>Transaction.begin()</CODE></A></DL>
</DL>
<HR>

<A NAME="Transaction(com.versant.fund.Capability)"><!-- --></A><H3>
Transaction</H3>
<PRE>
public <B>Transaction</B>(<A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund">Capability</A>&nbsp;c)</PRE>
<DL>
<DD>Constructs a new transaction.
 <code>Capability</code> is required to create a database
 <code>Session</code> with VERSANT/Java. For security, only one 
 <code>NewSessionCapability</code> can be made. It should be made 
 by trusted code, and protected from untrusted code.
 <p>
 This method is a VERSANT addition to the <code>Transaction</code>
 class specification outlined in the ODMG 2.0 bindings, and 
 constructs a new transaction. (The transaction is not yet open.) 
 You can construct a new transaction only after invoking the 
 <code>begin()</code> method. This constructor takes a 
 <code>Capability</code> instance in the event that the 
 transactions are created only by trusted code.
 <p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>c</CODE> - The VERSANT <code>Capability</code> instance
                required to create a VERSANT/Java Session.
<DT><B>Throws:</B>
<DD><CODE><code>TransactionDatabaseClosedException()</code></CODE> - a 
                run-time exception, if the database associated with this 
                transaction is not opened before calling this constructor.
<DD><CODE><code>TransactionDatabaseNotFoundException()</code></CODE> - a 
                run-time exception, if this transaction is not associated with any
                database (example: the Thread Default and Process Default databases
                are not set).<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#begin()"><CODE>Transaction.begin()</CODE></A>, 
<A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund"><CODE>Capability</CODE></A>, 
<A HREF="../../../com/versant/fund/NewSessionCapability.html" title="class in com.versant.fund"><CODE>NewSessionCapability</CODE></A></DL>
</DL>
<HR>

<A NAME="Transaction(com.versant.odmg.Database)"><!-- --></A><H3>
Transaction</H3>
<PRE>
public <B>Transaction</B>(<A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg">Database</A>&nbsp;db)</PRE>
<DL>
<DD>Constructs a new transaction.
 <p>
 This method is a VERSANT addition to the <code>Transaction</code> 
 class specification outlined in the ODMG 2.0 bindings. It 
 associates the transaction to the given database when creating the
 transaction.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>db</CODE> - The database being associated with this transaction.
<DT><B>Throws:</B>
<DD><CODE><code>TransactionDatabaseClosedException()</code></CODE> - a 
                run-time exception, if the database provided as argument is not 
                opened before calling this constructor.</DL>
</DL>
<HR>

<A NAME="Transaction(com.versant.odmg.Database, com.versant.fund.Capability)"><!-- --></A><H3>
Transaction</H3>
<PRE>
public <B>Transaction</B>(<A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg">Database</A>&nbsp;db,
                   <A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund">Capability</A>&nbsp;c)</PRE>
<DL>
<DD>Constructs a new transaction.
 <p>
 This method is a VERSANT addition to the Transaction class 
 specification outlined in the ODMG 2.0 bindings. Associates the 
 transaction to the given database when creating the transaction. 
 This constructor takes a <code>Capability</code> instance, in case 
 transactions are to be created only by trusted code.
 <p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>db</CODE> - The database being associated with this transaction.<DD><CODE>c</CODE> - The VERSANT <code>Capability</code> instance 
                                required to create a VERSANT/Java Session. A <code>Capability </code>
                                is required to create a database <code>Session</code> with 
                                VERSANT/Java. For security, only one <code>NewSessionCapability</code> 
                                can be made. It should be made by trusted code, and protected from
                                untrusted code.
<DT><B>Throws:</B>
<DD><CODE><code>TransactionDatabaseClosedException()</code></CODE> - a 
                run-time exception, if the database provided as argument is not 
                opened before calling this constructor.<DT><B>See Also:</B><DD><A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund"><CODE>Capability</CODE></A>, 
<A HREF="../../../com/versant/fund/NewSessionCapability.html" title="class in com.versant.fund"><CODE>NewSessionCapability</CODE></A></DL>
</DL>
<HR>

<A NAME="Transaction(com.versant.odmg.Database, com.versant.fund.Capability, java.util.Properties)"><!-- --></A><H3>
Transaction</H3>
<PRE>
public <B>Transaction</B>(<A HREF="../../../com/versant/odmg/Database.html" title="class in com.versant.odmg">Database</A>&nbsp;db,
                   <A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund">Capability</A>&nbsp;cap,
                   java.util.Properties&nbsp;prop)</PRE>
<DL>
<DD>Constructs a new transaction.
 This method is a VERSANT addition to the Transaction class 
 specification outlined in the ODMG 2.0 bindings.<p>
 This method associates the transaction to the given database when 
 creating the transaction. This constructor takes a 
 <code>Capability</code> instance, in case transactions are to be
 created only by trusted code. It also takes a property list.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>db</CODE> - The database being associated with this transaction.<DD><CODE>cap</CODE> - The VERSANT <code>Capability</code> instance. 
                                Specify null if the transaction is only used by trusted code.<DD><CODE>prop</CODE> - A property list.
 The <code>prop</code> parameter is an instance of 
 <code>java.util.Properties</code> that contains key-value pairs to 
 specify a list of properties of a session. Following are valid 
 keys, their values, and their meanings.<p>
 
 <b>Key: "database"</b><br>
 <ul>
 <li>a string of max length of 31 characters</li>
 <li>The name of a personal or group database to start the session on.</li><p>
 </ul>
 
 <b>Key: "sessionName"</b><p>
 <ul>
 <li>a string of max length of 31 characters.</li>
 <li>The name of the database session.  If you start multiple, 
 concurrent sessions, each session name must be unique within the 
 same process.</li>
 </ul>
 
 <b>Key: "longTransaction"</b><p>
 <ul>
 <li>a string of max length of 30 characters less the length of your 
 user name.</li>
 <li>The name of a long transaction for the session.</li>
 </ul>
 
 <b>Key: "options"</b><p>
 <ul>
 <li><code>"0"</code> 
 <ul>
 Start a "standard session" that uses the standard VERSANT session,
 transaction, and locking models.  
 This is the default
 </ul>
 <li><code>Constants.OPT_LK + ""</code> 
 <ul>Start an "optimistic locking session" that suppresses object 
 swapping, prevents automatic lock upgrades, and provides automatic
 collision notification.</ul>
 <li><code>Constants.READ_ACCESS + ""</code>
 <ul>Start a session with read connection mode that allows you to view 
 but not change data. If you make a connection with a read mode 
 access and then change an object, you will get the error  
 NET_RW_ACCESS_REQUIRED when you try to commit your transaction 
 (permissions are checked by the database server process).</ul>
 <li><code>Constants.WRITE_ACCESS + ""</code>
 <ul>
 Start a session with write connection mode that allows you to edit
 data.  This access mode is not currently supported, but may be 
 supported in future releases. At present, this mode is the same as
 READ_ACCESS|WRITE_ACCESS.</ul>
 <li><code>(Constants.READ_ACCESS | Constants.WRITE_ACCESS) + ""</code>
 <ul>Start a session with connection mode that allows you to view and 
 edit data in your session database.</ul>
 <li><code>Constants.DONT_JOIN + ""</code>
 <ul>Do not attach thread to the new session. The default is to attach 
 the thread to the new session.</ul>
 </ul>
 <b>Key: "lockmode"</b><p>
 <ul>
 <li><code>Constants.NOLOCK + ""</code></li>
 <ul>Use no lock as the default lock mode for this session.</ul>
 <li><code>Constants.WLOCK + ""</code></li>
 <ul>Use write lock as the default lock mode for this session.</ul>
 <li><code>Constants.ULOCK + ""</code>
 <ul>Use update lock as the default lock mode for this session.</ul>
 <li><code>Constants.RLOCK + ""</code></li>
 <ul>Use read lock as the default lock mode for this session.</ul>
 </ul>
 <b>Key: "userName"</b><p>
 <ul>
 <li>a string of max length of 31 characters</li>
 <li>The name of the user who is authorized to connect to the Database</li>
 </ul>
 <b>Key: "userPassword"</b><p>
 <ul>
 <li>a string of max length of 256 characters</li>
 <li>The password associated with the name of an authorized user.</li>
 </ul>
<DT><B>Throws:</B>
<DD><CODE><code>TransactionDatabaseClosedException,</code></CODE> - a 
 run-time exception, if the database provided as argument is not 
 opened before calling this constructor.<p><DT><B>See Also:</B><DD><A HREF="../../../com/versant/fund/Capability.html" title="interface in com.versant.fund"><CODE>Capability</CODE></A>, 
<A HREF="../../../com/versant/fund/NewSessionCapability.html" title="class in com.versant.fund"><CODE>NewSessionCapability</CODE></A></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="begin()"><!-- --></A><H3>
begin</H3>
<PRE>
public void <B>begin</B>()</PRE>
<DL>
<DD>Opens a <code>Transaction</code> if it has not already been opened.
 <p>
 Opening a <code>Transaction</code> enables creating, accessing, 
 and modifying objects within the scope of the 
 <code>Transaction</code>. Conversely, a <code>Transaction</code> 
 is implicitly closed through the invocation of the <code>commit()</code>
 or <code>abort()</code>methods.<p>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><code>TransactionInProgressException</code></CODE> - if this 
                transaction has already been started.
<DD><CODE><code>TransactionDatabaseNotFoundException</code></CODE> - if this
                transaction is not associated with any database.<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#commit()"><CODE>Transaction.commit()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#checkpoint()"><CODE>Transaction.checkpoint()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#abort()"><CODE>Transaction.abort()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="commit()"><!-- --></A><H3>
commit</H3>
<PRE>
public void <B>commit</B>()</PRE>
<DL>
<DD>Commit transaction.
 <p>
 This method commits all persistent object modifications in the 
 transaction to the database, release any related locks held by the 
 transaction, and close the transaction.
 <p>
 A persistent object modification is an update of any field of an 
 existing persistent object, or an update or creation of a new 
 named object in the database. If a persistent object modification 
 results in a reference from an existing persistent object to a
 transient object, then the transient object is moved to the 
 database and all references to it are updated automatically. These 
 actions could develop into a further set of references to transient
 objects. The commit process continues until there are no more 
 references to transient objects from such modified persistent 
 objects. This process is referred to as Transitive Persistence.<p>
 The <code>commit()</code> method implicitly commits the underlying
 JVI Session object. Since the <code>ODMGSession</code> instance 
 can be recovered from the transaction through the 
 <code>session()</code> method, and, the JVI session supports 
 additional functionality such as explicitly making objects 
 persistent, and deleting objects, such update activities of 
 objects made through the JVI Session would also get committed to
 the database.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><code>TransactionNotInProgressException</code></CODE> - if this 
 transaction was never started.<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#begin()"><CODE>Transaction.begin()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#abort()"><CODE>Transaction.abort()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="abort()"><!-- --></A><H3>
abort</H3>
<PRE>
public void <B>abort</B>()</PRE>
<DL>
<DD>Abandons all persistent object modifications and release any 
 associated database locks.
 <p>
 After this method runs, the transaction closes.
 <p>
 The <code>abort()</code> method implicitly rolls back the 
 underlying JVI Session object.
 <p>
 Since the <code>ODMGSession</code> instance can be recovered from 
 the transaction through the <code>session()</code> method, and, 
 the JVI session supports additional functionality such as 
 explicitly making objects persistent, and deleting objects, such 
 update activities of objects made through the JVI 
 <code>Session</code> would also get aborted<b>.</b><p>
 Aborting a transaction does not restore the state of modified 
 transient objects.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><code>TransactionNotInProgressException()</code></CODE> - run-time exception<code>,</code> if this transaction was never 
                opened.<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#begin()"><CODE>Transaction.begin()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#commit()"><CODE>Transaction.commit()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="checkpoint()"><!-- --></A><H3>
checkpoint</H3>
<PRE>
public void <B>checkpoint</B>()</PRE>
<DL>
<DD>Commits transaction.
 <p>
 This method commits all persistent object modifications made in 
 the transaction since the last checkpoint to the database and 
 retain all locks it held on those objects until the checkpoint was
 invoked.
 <p>
 The <code>checkpoint()</code> method implicitly checkpoints the 
 underlying JVI <code>ODMGSession</code> object. The 
 <code>ODMGSession</code> instance can be recovered from the 
 <code>Transaction</code> through the <code>session()</code> method.<p>
 The JVI <code>ODMGSession</code> supports additional functionality 
 such as explicitly making objects persistent, and deleting objects.
 When you invoke the checkpoint method, you checkpoint the update 
 activities of objects made through the JVI session with their 
 object locks retained.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><code>TransactionNotInProgressException()</code></CODE> - if this 
                transaction was never started.<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#begin()"><CODE>Transaction.begin()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#commit()"><CODE>Transaction.commit()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="session()"><!-- --></A><H3>
session</H3>
<PRE>
public <A HREF="../../../com/versant/odmg/ODMGSession.html" title="class in com.versant.odmg">ODMGSession</A> <B>session</B>()</PRE>
<DL>
<DD>Returns the <code>ODMGSession</code> instance corresponding to 
 this transaction.
 <p>
 Each <code>Transaction</code> bears a one-to-one mapping with an 
 <code>ODMGSession</code>. The <code>ODMGSession</code> class is a 
 sub-class of the <code>com.versant.trans.TransSession</code> that
 allows you to invoke JVI specific methods on the underlying JVI 
 <code>Session</code>.
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/ODMGSession.html" title="class in com.versant.odmg"><CODE>ODMGSession</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="join()"><!-- --></A><H3>
join</H3>
<PRE>
public void <B>join</B>()</PRE>
<DL>
<DD>Associates this thread with this transaction.
 <p>
 If the thread is already associated with a transaction, the 
 transaction is disconnected from the thread before the thread is 
 joined to the new transaction.
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#leave()"><CODE>Transaction.leave()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="leave()"><!-- --></A><H3>
leave</H3>
<PRE>
public void <B>leave</B>()</PRE>
<DL>
<DD>Disassociates this thread from this transaction.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><code>NotInTransactionException()</code></CODE> - if the caller 
                thread is not in the current transaction.<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#join()"><CODE>Transaction.join()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="isOpen()"><!-- --></A><H3>
isOpen</H3>
<PRE>
public boolean <B>isOpen</B>()</PRE>
<DL>
<DD>Returns <code>true</code> if a transaction is open and returns 
 <code>false</code> if the transaction is closed.
 <p>
 A transaction is open after the <code>begin()</code> method call
 and is implicitly closed after the <code>commit()</code> or 
 <code>abort()</code> method calls.
<P>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../../../com/versant/odmg/Transaction.html#begin()"><CODE>Transaction.begin()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#commit()"><CODE>Transaction.commit()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#checkpoint()"><CODE>Transaction.checkpoint()</CODE></A>, 
<A HREF="../../../com/versant/odmg/Transaction.html#abort()"><CODE>Transaction.abort()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="current()"><!-- --></A><H3>
current</H3>
<PRE>
public static <A HREF="../../../com/versant/odmg/Transaction.html" title="class in com.versant.odmg">Transaction</A> <B>current</B>()</PRE>
<DL>
<DD>A <code>static()</code> method on the <code>Transaction</code> 
 class that returns the current transaction associated with the 
 caller thread.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="lock(java.lang.Object, int)"><!-- --></A><H3>
lock</H3>
<PRE>
public void <B>lock</B>(java.lang.Object&nbsp;obj,
                 int&nbsp;aMode)</PRE>
<DL>
<DD>Upgrades the lock on the given object to the given level if it is
 not already at or above that level.
 <p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>obj</CODE> - The object on which to upgrade the lock.<DD><CODE>aMode</CODE> - The mode to set the lock.<p>
  Alternatives for instance lock modes are:
 <ul>
 <li><code>Constants.WLOCK</code>       :  Write lock </li>
 <li><code>Constants.RIWLOCK</code>     :  Read/intention-write lock </li>
 <li><code>Constants.IWLOCK</code>      :  Intention-write lock </li>
 <li><code>Constants.ULOCK</code>               :  Update lock </li>
 <li><code>Constants.RLOCK</code>               :  Read lock </li>
 <li><code>Constants.IRLOCK</code>      :  Intention-read lock </li>
 <li><code>Constants.NOLOCK</code>      :  No lock </li>
 </ul>
 The denial of a lock request occurs after the time-out period has 
 lapsed. This time-out period is determined by the value of the 
 server process parameter <code>lock_wait_timeout</code> in the 
 database server profile <code>profile.be</code>.<p>
<DT><B>Throws:</B>
<DD><CODE><code>TransactionNotInProgressException</code></CODE> - if this 
 transaction was never opened (example: it was never begun).
<DD><CODE><code>LockNotGrantedException</code></CODE> - if the lock could not
 be granted.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/versant/odmg/Set.html" title="interface in com.versant.odmg"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/versant/odmg/TransactionAbortedException.html" title="class in com.versant.odmg"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/versant/odmg/Transaction.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Transaction.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
